# todo-example-segregating-model-for-frontend

## このリポジトリについて

このリポジトリは、  
**「フロントエンドをアプリケーションとして設計する」**  
という考え方を検証・説明するためのサンプルアプリケーションです。

本リポジトリの目的は、特定のフレームワークや実装テクニックを紹介することではありません。  
React / Vue などの UI フレームワークから独立した **アプリケーションのコア（知識と振る舞い）** を明確に分離することで、

- なぜ Fat Component が生まれやすいのか
- 何を UI の外に出すと設計が安定するのか
- フロントエンド設計の「判断基準」はどこにあるのか

を、**動くコード**として示すことを目的としています。

## 背景：なぜこのサンプルを作るのか

現代のフロントエンドは、単なる画面描画ではなく、

- 状態遷移
- 入力途中の制約
- 条件付き操作
- 一時的な整合性

といった複雑な振る舞いを扱うようになりました。

その結果、UI コンポーネントに  
**知識（ルール・制約）と振る舞い（操作・遷移）が混在**し、  
いわゆる *Fat Component* が生まれやすくなっています。

本リポジトリでは、

> 問題は「ロジックがあること」ではなく  
> **「ロジックが区別なく UI に混ざること」**

という前提に立ち、  
フロントエンドの設計対象を **UI の外側** まで広げる試みを行います。

## このサンプルで示したいこと

- フロントエンドにも「ドメイン知識」が存在する
- UI フレームワークは「描画と同期」が得意だが、それ以外は別問題である
- 知識と振る舞いを UI から切り離すことで：
  - テスト可能になる
  - フレームワーク変更の影響を局所化できる
  - 設計の意図をコードとして固定できる

このサンプルは「再利用性」や「流行のアーキテクチャ」を主張するものではありません。  
**設計上の境界をどこに引くか**を考えるための材料です。

## アーキテクチャ概要

```txt

packages/
├─ front/     # フレームワーク非依存のアプリケーションコア
├─ react/     # React による UI 実装
├─ vue/       # Vue による UI 実装
└─ svelte/    # Svelteによる UI 実装

```

### 依存関係のルール

- UI は front に依存してよい
- front は UI フレームワークを一切知らない
- front は DOM / browser API / routing を参照しない

## front の責務

front は次のものを提供します：

- アプリケーションの状態（Single Source of Truth）
- 状態を変更する操作（コマンド / ユースケース）
- ルール・制約・不変条件
- テスト可能な振る舞い

front は次のことを **行いません**：

- 画面描画
- ユーザー入力の取得
- UI フレームワークの API 利用

## UI 層の責務

UI 層の役割はシンプルです：

1. front の状態を取得する
2. ユーザー操作を front のコマンドとして渡す
3. 返ってきた状態を描画する

UI は front の「意味」を解釈しません。  
**何が正しい操作か、どの遷移が許されるか**は front に委ねます。

## テストについて

- front 層は UI なしで単体テストされます
- テストは「実装」ではなく「仕様」を表現することを重視しています
- UI テストは最小限、または省略しています

この構成により、UI フレームワークの変更や更新が  
front のテストに影響を与えないことを確認できます。

## このサンプルが目指していないこと

- 万能なフロントエンドアーキテクチャの提示
- すべてのアプリケーションに適用できる設計の主張
- フレームワーク間の優劣比較

アプリケーションの規模や性質によって、  
この分離は過剰になることもあります。

本リポジトリは、**どこまでをViewとし、どこからをアプリケーションとするか**を考えるための **思考実験と実装例** です。

## 想定される読み方

- front のコードとテストを先に読む
- UI 実装を見て「どれだけ薄いか」を確認する
- 「自分のプロジェクトでは、どこがアプリケーションの本体だろうか」を考える

## 関連

- 同一思想に基づく過去のサンプル：
  - <https://github.com/tooppoo/separate-model-on-front>

## License

MIT
